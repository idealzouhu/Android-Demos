## 文件存储 API

文件存储一般使用 `openFileOutput()`和 `openFileInput()`方法，

### 文件存储

Context 类中提供了一个 `openFileOutput()` 方法，可以用于将数据存储到指定的文件中。注意，**文件会自动保存在应用的内置存储空间内**，路径通常是 `/data/data/<你的应用包名>/files/note_data`。你无需指定完整路径，也无需申请存储权限，因为这些文件默认是应用私有的

```java
    private void saveToFile(String text) {
        FileOutputStream out = null;
        BufferedWriter writer = null;
        try {
            // 使用 openFileOutput 打开文件输出流
            // 参数1: 文件名，如 "note_data"
            // 参数2: 操作模式，MODE_PRIVATE 表示覆盖原文件
            out = openFileOutput("note_data", Context.MODE_PRIVATE);
            writer = new BufferedWriter(new OutputStreamWriter(out));
            writer.write(text); // 执行写入操作
        } catch (IOException e) {
            Log.e("MainActivity", "Failed to save file content", e);
        } finally {
            // 最终关闭流，释放资源
            try {
                if (writer != null) {
                    writer.close();
                }
            } catch (IOException e) {
                Log.e("MainActivity", "Failed to close writer", e);
            }
        }
    }

```

其中， `openFileOutput()` 方法返回的是 `FileOutputStream` 对象，又依次被封装成  `OutputStreamWriter`、`BufferedWriter`。每一层都是对下一层的封装和增强，具体细节如下：

- `FileOutputStream`:  文件字节输出流，直接操作文件的原始字节数据。
- `OutputStreamWriter`： 字符流到字节流的桥梁，将字符转换为字节进行写入。
- `BufferedWriter`： 带缓冲的字符输出流，提高写入效率。





### 文件读取

类似于将数据存储到文件中，`Context` 类中还提供了一个 `openFileInput()` 方法，用于从文件中读取数据。它只接收一个参数，即要读取的文件名，然后系统会**自动到 `/data/data/<package name>/files/` 目录下加载这个文件**，并返回一个`FileInputStream`对象。

```java
private String loadFromFile() {
        FileInputStream in = null;
        BufferedReader reader = null;
        StringBuilder content = new StringBuilder();
        try {
            in = openFileInput("note_data"); // 打开文件输入流
            reader = new BufferedReader(new InputStreamReader(in));
            String line = "";
            // 逐行读取文件内容
            while ((line = reader.readLine()) != null) {
                content.append(line);
            }
        } catch (IOException e) {
            Log.e("MainActivity", "Failed to load file content", e);
        } finally {
            // 最终关闭流，释放资源
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    Log.e("MainActivity", "Failed to close reader", e);
                }
            }
        }
        return content.toString();
    }
```

